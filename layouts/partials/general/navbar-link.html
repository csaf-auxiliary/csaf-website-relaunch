<!--
  SPDX-License-Identifier: Apache-2.0
  SPDX-FileCopyrightText: 2025 German Federal Office for Information Security (BSI) <https://www.bsi.bund.de>
-->
<li class="text-primary">
  {{ $href := cond .link.external .link.url (.link.url | relURL) }}

  {{ if .link.external }}
    <a href="{{ $href }}" class="nav-link" rel="noopener noreferrer">
      {{ .link.label }}
    </a>
  {{ else }}
    {{ $currentPage := .page.RelPermalink | relURL }}
    {{ $isExactMatch := eq $href $currentPage }}
    {{ $isInCategory := and (not $isExactMatch) (strings.HasPrefix $currentPage $href) }}

    {{ if or $isExactMatch $isInCategory }}
      {{ if $isExactMatch }}
        <div class="nav-link nav-link--active">
          <span>{{ .link.label }}</span>
        </div>
      {{ else }}
        <a href="{{ $href }}" class="nav-link nav-link--active">
          {{ .link.label }}
        </a>
      {{ end }}
    {{ else }}
      <a href="{{ $href }}" class="nav-link">
        {{ .link.label }}
      </a>
    {{ end }}
  {{ end }}
</li>